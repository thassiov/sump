openapi: 3.0.0
paths:
  /api/v1/auth/tenants/{tenantId}/login:
    post:
      operationId: TenantAuthController_login
      summary: Log in to a tenant account
      description: Authenticates with email, phone, or username and password, creates
        a session.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginDto'
      responses:
        '200':
          description: Successfully logged in
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponseDto'
        '400':
          description: Must provide email, phone, or username
        '401':
          description: Invalid credentials
        '404':
          description: Tenant not found
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/logout:
    post:
      operationId: TenantAuthController_logout
      summary: Log out of current session
      description: Revokes the current session and clears the cookie.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema: {}
      responses:
        '204':
          description: Successfully logged out
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/session:
    get:
      operationId: TenantAuthController_getSession
      summary: Get current session
      description: Returns the current session if valid.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema: {}
      responses:
        '200':
          description: Current session
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponseDto'
        '401':
          description: No valid session
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/sessions:
    get:
      operationId: TenantAuthController_listSessions
      summary: List all active sessions
      description: Returns all active sessions for the current account.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema: {}
      responses:
        '200':
          description: List of active sessions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SessionResponseDto'
        '401':
          description: No valid session
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/logout-all:
    post:
      operationId: TenantAuthController_logoutAll
      summary: Log out of all sessions
      description: Revokes all sessions for the current account.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema: {}
      responses:
        '200':
          description: Number of sessions revoked
          content:
            application/json:
              schema:
                type: object
                properties:
                  revoked:
                    type: number
        '401':
          description: No valid session
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/forgot-password:
    post:
      operationId: TenantAuthController_forgotPassword
      summary: Request a password reset
      description: Initiates a password reset flow by creating a reset token. The
        token should be sent to the user via email/SMS.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordDto'
      responses:
        '200':
          description: Password reset initiated (always returns success for security)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForgotPasswordResponseDto'
        '400':
          description: Must provide email, phone, or username
        '404':
          description: Tenant not found
      tags:
      - Tenant Authentication
  /api/v1/auth/tenants/{tenantId}/reset-password:
    post:
      operationId: TenantAuthController_resetPassword
      summary: Reset password with token
      description: Resets the password using a valid reset token. All sessions will
        be revoked.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordDto'
      responses:
        '200':
          description: Password reset result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResetPasswordResponseDto'
        '400':
          description: Invalid or expired token, or weak password
        '404':
          description: Tenant not found
      tags:
      - Tenant Authentication
  /api/v1/auth/environments/{environmentId}/signup:
    post:
      operationId: EnvironmentAuthController_signup
      summary: Sign up a new environment account
      description: Creates a new account with credentials for the specified environment.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnvironmentSignupDto'
      responses:
        '201':
          description: Account created and session started
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponseDto'
        '400':
          description: Invalid input or weak password
        '404':
          description: Environment not found
        '409':
          description: Email/username already exists
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/login:
    post:
      operationId: EnvironmentAuthController_login
      summary: Log in to an environment account
      description: Authenticates with email, phone, or username and password, creates
        a session.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginDto'
      responses:
        '200':
          description: Successfully logged in
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponseDto'
        '400':
          description: Must provide email, phone, or username
        '401':
          description: Invalid credentials
        '403':
          description: Account is disabled
        '404':
          description: Environment not found
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/logout:
    post:
      operationId: EnvironmentAuthController_logout
      summary: Log out of current session
      description: Revokes the current session and clears the cookie.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema: {}
      responses:
        '204':
          description: Successfully logged out
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/session:
    get:
      operationId: EnvironmentAuthController_getSession
      summary: Get current session
      description: Returns the current session if valid.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema: {}
      responses:
        '200':
          description: Current session
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponseDto'
        '401':
          description: No valid session
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/sessions:
    get:
      operationId: EnvironmentAuthController_listSessions
      summary: List all active sessions
      description: Returns all active sessions for the current account.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema: {}
      responses:
        '200':
          description: List of active sessions
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SessionResponseDto'
        '401':
          description: No valid session
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/logout-all:
    post:
      operationId: EnvironmentAuthController_logoutAll
      summary: Log out of all sessions
      description: Revokes all sessions for the current account.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema: {}
      responses:
        '200':
          description: Number of sessions revoked
          content:
            application/json:
              schema:
                type: object
                properties:
                  revoked:
                    type: number
        '401':
          description: No valid session
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/forgot-password:
    post:
      operationId: EnvironmentAuthController_forgotPassword
      summary: Request a password reset
      description: Initiates a password reset flow by creating a reset token. The
        token should be sent to the user via email/SMS.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordDto'
      responses:
        '200':
          description: Password reset initiated (always returns success for security)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ForgotPasswordResponseDto'
        '400':
          description: Must provide email, phone, or username
        '404':
          description: Environment not found
      tags:
      - Environment Authentication
  /api/v1/auth/environments/{environmentId}/reset-password:
    post:
      operationId: EnvironmentAuthController_resetPassword
      summary: Reset password with token
      description: Resets the password using a valid reset token. All sessions will
        be revoked.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordDto'
      responses:
        '200':
          description: Password reset result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResetPasswordResponseDto'
        '400':
          description: Invalid or expired token, or weak password
        '404':
          description: Environment not found
      tags:
      - Environment Authentication
  /api/v1/tenants:
    post:
      operationId: TenantController_createTenant
      summary: Create a new tenant with initial account and environment
      description: Creates a new tenant along with an owner account and optionally
        an initial environment. If no environment is specified, a "default" environment
        will be created. Returns a session for the newly created owner account.
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTenantDto'
      responses:
        '201':
          description: Tenant created successfully with session
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateTenantResponseDto'
        '400':
          description: Invalid input or weak password
        '409':
          description: Email/username already exists
      tags:
      - Tenants
  /api/v1/tenants/{tenantId}:
    get:
      operationId: TenantController_getTenantById
      summary: Get tenant by ID
      description: Retrieves a tenant by its UUID, including all its environments.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      responses:
        '200':
          description: Tenant found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
        '404':
          description: Tenant not found
      tags:
      - Tenants
    delete:
      operationId: TenantController_deleteTenantById
      summary: Delete tenant by ID
      description: Deletes a tenant and all associated data (accounts, environments,
        etc.).
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      responses:
        '204':
          description: Tenant deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - owner role required
        '404':
          description: Tenant not found
      tags:
      - Tenants
    patch:
      operationId: TenantController_updateTenant
      summary: Update tenant non-sensitive properties
      description: Updates allowed tenant properties like name.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantDto'
      responses:
        '204':
          description: Tenant updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Tenant not found
      tags:
      - Tenants
  /api/v1/tenants/{tenantId}/accounts:
    get:
      operationId: TenantController_getAccountsByTenantId
      summary: Get all accounts for a tenant
      description: Retrieves all accounts associated with the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      responses:
        '200':
          description: List of accounts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TenantAccountResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
      tags:
      - Tenants
    post:
      operationId: TenantAccountController_createAccount
      summary: Create a new account for a tenant
      description: Creates a new account associated with the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTenantAccountDto'
      responses:
        '201':
          description: Account created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateTenantAccountResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/custom-property:
    patch:
      operationId: TenantController_setCustomProperty
      summary: Set custom property on tenant
      description: Sets or updates a custom property on the tenant. Pass the property
        as a key-value pair in the body.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        description: A key-value pair to set as a custom property
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              example:
                tier: enterprise
      responses:
        '204':
          description: Custom property set successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Tenant not found
      tags:
      - Tenants
    delete:
      operationId: TenantController_deleteCustomProperty
      summary: Delete custom property from tenant
      description: Removes a custom property from the tenant by its key.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteCustomPropertyDto'
      responses:
        '204':
          description: Custom property deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Tenant not found
      tags:
      - Tenants
  /api/v1/tenants/{tenantId}/accounts/user-defined-identification:
    get:
      operationId: TenantAccountController_getAccountByUserDefinedIdentification
      summary: Get account by user defined identification
      description: Searches for an account by email, phone, or username within the
        tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDefinedIdentificationDto'
      responses:
        '200':
          description: Account found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantAccountResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}:
    get:
      operationId: TenantAccountController_getAccountById
      summary: Get account by ID and tenant ID
      description: Retrieves an account by its UUID within the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      responses:
        '200':
          description: Account found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TenantAccountResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
    delete:
      operationId: TenantAccountController_deleteAccount
      summary: Delete account by ID and tenant ID
      description: Deletes an account from the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      responses:
        '204':
          description: Account deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
    patch:
      operationId: TenantAccountController_updateAccount
      summary: Update account non-sensitive properties
      description: Updates allowed account properties like name and avatar URL. Users
        can update their own account.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantAccountDto'
      responses:
        '204':
          description: Account updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - must be admin/owner or account owner
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}/email:
    patch:
      operationId: TenantAccountController_updateAccountEmail
      summary: Update account email
      description: Updates the email address for the specified account. Users can
        update their own email.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantAccountEmailDto'
      responses:
        '204':
          description: Email updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - must be admin/owner or account owner
        '404':
          description: Account not found
        '409':
          description: Email already in use
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}/phone:
    patch:
      operationId: TenantAccountController_updateAccountPhone
      summary: Update account phone
      description: Updates the phone number for the specified account. Users can update
        their own phone.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantAccountPhoneDto'
      responses:
        '204':
          description: Phone updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - must be admin/owner or account owner
        '404':
          description: Account not found
        '409':
          description: Phone already in use
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}/username:
    patch:
      operationId: TenantAccountController_updateAccountUsername
      summary: Update account username
      description: Updates the username for the specified account. Users can update
        their own username.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantAccountUsernameDto'
      responses:
        '204':
          description: Username updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - must be admin/owner or account owner
        '404':
          description: Account not found
        '409':
          description: Username already in use
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}/disable:
    patch:
      operationId: TenantAccountController_disableAccount
      summary: Disable an account
      description: Disables an account. Owners can disable admins and users. Admins
        can only disable users. Disabled accounts cannot log in.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account to disable
        schema:
          type: string
      responses:
        '204':
          description: Account disabled successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient role to disable this account
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/accounts/{accountId}/enable:
    patch:
      operationId: TenantAccountController_enableAccount
      summary: Enable a disabled account
      description: Re-enables a previously disabled account. Owners can enable admins
        and users. Admins can only enable users.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account to enable
        schema:
          type: string
      responses:
        '204':
          description: Account enabled successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient role to enable this account
        '404':
          description: Account not found
      tags:
      - Tenant Accounts
  /api/v1/tenants/{tenantId}/environments:
    post:
      operationId: EnvironmentController_createEnvironment
      summary: Create a new environment for a tenant
      description: Creates a new environment associated with the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEnvironmentDto'
      responses:
        '201':
          description: Environment created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateEnvironmentResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
      tags:
      - Environments
  /api/v1/tenants/{tenantId}/environments/{environmentId}:
    get:
      operationId: EnvironmentController_getEnvironmentById
      summary: Get environment by ID and tenant ID
      description: Retrieves an environment by its UUID within the specified tenant.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      responses:
        '200':
          description: Environment found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
        '404':
          description: Environment not found
      tags:
      - Environments
    delete:
      operationId: EnvironmentController_deleteEnvironment
      summary: Delete environment by ID and tenant ID
      description: Deletes an environment and all its associated accounts.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      responses:
        '204':
          description: Environment deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Environment not found
      tags:
      - Environments
    patch:
      operationId: EnvironmentController_updateEnvironment
      summary: Update environment non-sensitive properties
      description: Updates allowed environment properties like name.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentDto'
      responses:
        '204':
          description: Environment updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Environment not found
      tags:
      - Environments
  /api/v1/tenants/{tenantId}/environments/{environmentId}/custom-property:
    patch:
      operationId: EnvironmentController_setCustomProperty
      summary: Set custom property on environment
      description: Sets or updates a custom property on the environment.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        description: A key-value pair to set as a custom property
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              example:
                max_users: 100
      responses:
        '204':
          description: Custom property set successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Environment not found
      tags:
      - Environments
    delete:
      operationId: EnvironmentController_deleteCustomProperty
      summary: Delete custom property from environment
      description: Removes a custom property from the environment by its key.
      parameters:
      - name: tenantId
        required: true
        in: path
        description: UUID of the tenant
        schema:
          type: string
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteEnvironmentCustomPropertyDto'
      responses:
        '204':
          description: Custom property deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Environment not found
      tags:
      - Environments
  /api/v1/environments/{environmentId}/accounts:
    post:
      operationId: EnvironmentAccountController_createAccount
      summary: Sign up for an environment
      description: Creates a new user account within the specified environment. This
        is a public endpoint for user registration.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEnvironmentAccountDto'
      responses:
        '201':
          description: Account created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateEnvironmentAccountResponseDto'
        '409':
          description: Email/username/phone already in use
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}:
    get:
      operationId: EnvironmentAccountController_getAccountById
      summary: Get account by ID and environment ID
      description: Retrieves an account by its UUID within the specified environment.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      responses:
        '200':
          description: Account found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentAccountResponseDto'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - insufficient permissions
        '404':
          description: Account not found
      tags:
      - Environment Accounts
    delete:
      operationId: EnvironmentAccountController_deleteAccount
      summary: Delete own account
      description: Allows a user to delete their own account. Admins cannot delete
        user accounts (use disable instead).
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      responses:
        '204':
          description: Account deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only delete your own account
        '404':
          description: Account not found
      tags:
      - Environment Accounts
    patch:
      operationId: EnvironmentAccountController_updateAccount
      summary: Update own account properties
      description: Updates account properties like name and avatar URL. Users can
        only update their own account.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountDto'
      responses:
        '204':
          description: Account updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only update your own account
        '404':
          description: Account not found
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/email:
    patch:
      operationId: EnvironmentAccountController_updateAccountEmail
      summary: Update own email
      description: Updates the email address. Users can only update their own email.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountEmailDto'
      responses:
        '204':
          description: Email updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only update your own email
        '404':
          description: Account not found
        '409':
          description: Email already in use
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/phone:
    patch:
      operationId: EnvironmentAccountController_updateAccountPhone
      summary: Update own phone
      description: Updates the phone number. Users can only update their own phone.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountPhoneDto'
      responses:
        '204':
          description: Phone updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only update your own phone
        '404':
          description: Account not found
        '409':
          description: Phone already in use
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/username:
    patch:
      operationId: EnvironmentAccountController_updateAccountUsername
      summary: Update own username
      description: Updates the username. Users can only update their own username.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountUsernameDto'
      responses:
        '204':
          description: Username updated successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only update your own username
        '404':
          description: Account not found
        '409':
          description: Username already in use
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/custom-property:
    patch:
      operationId: EnvironmentAccountController_setCustomProperty
      summary: Set custom property on own account
      description: Sets or updates a custom property. Users can only set properties
        on their own account.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        description: A key-value pair to set as a custom property
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              example:
                subscription: premium
      responses:
        '204':
          description: Custom property set successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only set properties on your own account
        '404':
          description: Account not found
      tags:
      - Environment Accounts
    delete:
      operationId: EnvironmentAccountController_deleteCustomProperty
      summary: Delete custom property from own account
      description: Removes a custom property. Users can only delete properties from
        their own account.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account
        schema:
          type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteEnvironmentAccountCustomPropertyDto'
      responses:
        '204':
          description: Custom property deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - you can only delete properties from your own account
        '404':
          description: Account not found
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/disable:
    patch:
      operationId: EnvironmentAccountController_disableAccount
      summary: Disable an account
      description: Disables an account. Only environment admins/owners can disable
        accounts. Disabled accounts cannot log in.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account to disable
        schema:
          type: string
      responses:
        '204':
          description: Account disabled successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Account not found
      tags:
      - Environment Accounts
  /api/v1/environments/{environmentId}/accounts/{accountId}/enable:
    patch:
      operationId: EnvironmentAccountController_enableAccount
      summary: Enable a disabled account
      description: Re-enables a previously disabled account. Only environment admins/owners
        can enable accounts.
      parameters:
      - name: environmentId
        required: true
        in: path
        description: UUID of the environment
        schema:
          type: string
      - name: accountId
        required: true
        in: path
        description: UUID of the account to enable
        schema:
          type: string
      responses:
        '204':
          description: Account enabled successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - admin or owner role required
        '404':
          description: Account not found
      tags:
      - Environment Accounts
  /api/v1/health:
    get:
      operationId: HealthController_check
      summary: Health check endpoint
      description: Returns the current health status of the API.
      parameters: []
      responses:
        '200':
          description: API is healthy
      tags:
      - Health
info:
  title: Sump API
  description: Simple User Management Platform
  version: 0.1.0
  contact: {}
tags: []
servers: []
components:
  schemas:
    LoginDto:
      type: object
      properties:
        email:
          type: string
          description: Email address (use email, phone, or username)
          example: jane.smith@example.com
        phone:
          type: string
          description: Phone number in E.164 format (use email, phone, or username)
          example: '+1234567890'
        username:
          type: string
          description: Username (use email, phone, or username)
          example: janesmith
        password:
          type: string
          description: Password
          example: SecureP@ssw0rd!
      required:
      - password
    SessionResponseDto:
      type: object
      properties:
        id:
          type: string
          description: Session ID
          example: 550e8400-e29b-41d4-a716-446655440000
        accountType:
          type: string
          description: Account type
          enum:
          - tenant_account
          - environment_account
          example: tenant_account
        accountId:
          type: string
          description: Account ID
          example: 550e8400-e29b-41d4-a716-446655440000
        contextType:
          type: string
          description: Context type (tenant or environment)
          enum:
          - tenant
          - environment
          example: tenant
        contextId:
          type: string
          description: Context ID (tenant or environment UUID)
          example: 550e8400-e29b-41d4-a716-446655440000
        expiresAt:
          format: date-time
          type: string
          description: Session expiration date
          example: '2025-01-27T12:00:00.000Z'
        ipAddress:
          type: string
          description: IP address that created the session
          example: 192.168.1.1
        userAgent:
          type: string
          description: User agent that created the session
          example: Mozilla/5.0...
        lastActiveAt:
          format: date-time
          type: string
          description: Last activity timestamp
          example: '2025-01-01T12:00:00.000Z'
        createdAt:
          format: date-time
          type: string
          description: Session creation timestamp
          example: '2025-01-01T12:00:00.000Z'
      required:
      - id
      - accountType
      - accountId
      - contextType
      - contextId
      - expiresAt
      - lastActiveAt
      - createdAt
    AuthResponseDto:
      type: object
      properties:
        accountId:
          type: string
          description: Account ID
          example: 550e8400-e29b-41d4-a716-446655440000
        session:
          description: Session information
          allOf:
          - $ref: '#/components/schemas/SessionResponseDto'
      required:
      - accountId
      - session
    ForgotPasswordDto:
      type: object
      properties:
        email:
          type: string
          description: Email address. At least one of email, phone, or username must
            be provided.
          example: jane.smith@example.com
        phone:
          type: string
          description: Phone number in E.164 format. At least one of email, phone,
            or username must be provided.
          example: '+1234567890'
        username:
          type: string
          description: Username. At least one of email, phone, or username must be
            provided.
          example: janesmith
    ForgotPasswordResponseDto:
      type: object
      properties:
        message:
          type: string
          description: Message indicating the request was processed. For security,
            this message is the same whether or not the account exists.
          example: If an account exists with this identifier, a reset link has been
            sent.
      required:
      - message
    ResetPasswordDto:
      type: object
      properties:
        token:
          type: string
          description: The password reset token received via email/SMS
          example: a1b2c3d4e5f6...
        newPassword:
          type: string
          description: The new password (min 8 characters)
          example: NewSecureP@ssw0rd!
      required:
      - token
      - newPassword
    ResetPasswordResponseDto:
      type: object
      properties:
        success:
          type: boolean
          description: Whether the password was successfully reset
          example: true
        message:
          type: string
          description: Message describing the result
          example: Password has been reset successfully. Please log in with your new
            password.
      required:
      - success
      - message
    EnvironmentSignupDto:
      type: object
      properties:
        name:
          type: string
          description: Full name of the account holder
          example: John Doe
          minLength: 3
          maxLength: 100
        email:
          type: string
          description: Email address
          example: john.doe@example.com
        username:
          type: string
          description: Username
          example: johndoe
          minLength: 3
          maxLength: 20
        password:
          type: string
          description: Password
          example: SecureP@ssw0rd!
          minLength: 8
        phone:
          type: string
          description: Phone number in E.164 format
          example: '+1234567890'
        avatarUrl:
          type: string
          description: URL to avatar image
          example: https://example.com/avatar.png
      required:
      - name
      - email
      - username
      - password
    CreateTenantDetailsDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the tenant
          example: My Company
          minLength: 2
        customProperties:
          type: object
          description: Custom properties for the tenant
          example:
            tier: premium
            region: us-east
          additionalProperties: true
      required:
      - name
    CreateTenantAccountRoleDto:
      type: object
      properties:
        role:
          type: string
          description: Role type
          enum:
          - owner
          - admin
          - user
          example: owner
        target:
          type: string
          description: Target type for the role
          enum:
          - tenant
          - environment
          example: tenant
        targetId:
          type: string
          description: UUID of the target (tenant or environment)
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - role
      - target
      - targetId
    CreateTenantOwnerAccountDto:
      type: object
      properties:
        name:
          type: string
          description: Full name of the account holder
          example: John Doe
          minLength: 3
          maxLength: 100
        email:
          type: string
          description: Email address
          example: john.doe@example.com
        username:
          type: string
          description: Username
          example: johndoe
          minLength: 3
          maxLength: 20
        password:
          type: string
          description: Password for the account
          example: SecureP@ssw0rd!
          minLength: 8
        phone:
          type: string
          description: Phone number in E.164 format
          example: '+1234567890'
        avatarUrl:
          type: string
          description: URL to avatar image
          example: https://example.com/avatar.png
        roles:
          description: Roles assigned to the account
          type: array
          items:
            $ref: '#/components/schemas/CreateTenantAccountRoleDto'
      required:
      - name
      - email
      - username
      - password
    CreateEnvironmentDetailsDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the environment
          example: production
          minLength: 2
        customProperties:
          type: object
          description: Custom properties for the environment
          example:
            feature_flags:
              dark_mode: true
          additionalProperties: true
      required:
      - name
    CreateTenantDto:
      type: object
      properties:
        tenant:
          description: Tenant details
          allOf:
          - $ref: '#/components/schemas/CreateTenantDetailsDto'
        account:
          description: Initial owner account for the tenant
          allOf:
          - $ref: '#/components/schemas/CreateTenantOwnerAccountDto'
        environment:
          description: Initial environment (defaults to "default" if not provided)
          allOf:
          - $ref: '#/components/schemas/CreateEnvironmentDetailsDto'
      required:
      - tenant
      - account
    SessionInfoDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the session
          example: 550e8400-e29b-41d4-a716-446655440003
        accountType:
          type: string
          description: Account type
          example: tenant_account
        accountId:
          type: string
          description: UUID of the account
          example: 550e8400-e29b-41d4-a716-446655440001
        contextType:
          type: string
          description: Context type
          example: tenant
        contextId:
          type: string
          description: UUID of the context (tenant or environment)
          example: 550e8400-e29b-41d4-a716-446655440000
        expiresAt:
          format: date-time
          type: string
          description: Session expiration timestamp
      required:
      - id
      - accountType
      - accountId
      - contextType
      - contextId
      - expiresAt
    CreateTenantResponseDto:
      type: object
      properties:
        tenantId:
          type: string
          description: UUID of the created tenant
          example: 550e8400-e29b-41d4-a716-446655440000
        accountId:
          type: string
          description: UUID of the created account
          example: 550e8400-e29b-41d4-a716-446655440001
        environmentId:
          type: string
          description: UUID of the created environment
          example: 550e8400-e29b-41d4-a716-446655440002
        session:
          description: Session created for the new account
          allOf:
          - $ref: '#/components/schemas/SessionInfoDto'
      required:
      - tenantId
      - accountId
      - environmentId
      - session
    EnvironmentSummaryDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the environment
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Name of the environment
          example: production
        tenantId:
          type: string
          description: UUID of the tenant this environment belongs to
          example: 550e8400-e29b-41d4-a716-446655440001
        customProperties:
          type: object
          description: Custom properties
          example:
            feature_flags:
              dark_mode: true
      required:
      - id
      - name
      - tenantId
    TenantResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the tenant
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Name of the tenant
          example: My Company
        customProperties:
          type: object
          description: Custom properties
          example:
            tier: premium
        environments:
          description: List of environments belonging to this tenant
          type: array
          items:
            $ref: '#/components/schemas/EnvironmentSummaryDto'
      required:
      - id
      - name
      - environments
    UpdateTenantDto:
      type: object
      properties:
        name:
          type: string
          description: New name for the tenant
          example: My Updated Company
          minLength: 2
    TenantAccountRoleResponseDto:
      type: object
      properties:
        role:
          type: string
          description: Role type
          enum:
          - owner
          - admin
          - user
          example: admin
        target:
          type: string
          description: Target type for the role
          enum:
          - tenant
          - environment
          example: tenant
        targetId:
          type: string
          description: UUID of the target
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - role
      - target
      - targetId
    TenantAccountResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the account
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Full name
          example: John Doe
        email:
          type: string
          description: Email address
          example: john.doe@example.com
        username:
          type: string
          description: Username
          example: johndoe
        phone:
          type: string
          description: Phone number
          example: '+1234567890'
        avatarUrl:
          type: string
          description: Avatar URL
          example: https://example.com/avatar.png
        tenantId:
          type: string
          description: UUID of the tenant
          example: 550e8400-e29b-41d4-a716-446655440001
        roles:
          description: Assigned roles
          type: array
          items:
            $ref: '#/components/schemas/TenantAccountRoleResponseDto'
      required:
      - id
      - name
      - email
      - username
      - tenantId
      - roles
    DeleteCustomPropertyDto:
      type: object
      properties:
        customProperty:
          type: string
          description: Key of the custom property to delete
          example: tier
      required:
      - customProperty
    TenantAccountRoleDto:
      type: object
      properties:
        role:
          type: string
          description: Role type
          enum:
          - owner
          - admin
          - user
          example: user
        target:
          type: string
          description: Target type for the role
          enum:
          - tenant
          - environment
          example: tenant
        targetId:
          type: string
          description: UUID of the target (tenant or environment)
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - role
      - target
      - targetId
    CreateTenantAccountDto:
      type: object
      properties:
        name:
          type: string
          description: Full name of the account holder
          example: Jane Smith
          minLength: 3
          maxLength: 100
        email:
          type: string
          description: Email address
          example: jane.smith@example.com
        username:
          type: string
          description: Username
          example: janesmith
          minLength: 3
          maxLength: 20
        phone:
          type: string
          description: Phone number in E.164 format
          example: '+1234567890'
        avatarUrl:
          type: string
          description: URL to avatar image
          example: https://example.com/avatar.png
        roles:
          description: Roles assigned to the account
          type: array
          items:
            $ref: '#/components/schemas/TenantAccountRoleDto'
      required:
      - name
      - email
      - username
    CreateTenantAccountResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the created account
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - id
    UserDefinedIdentificationDto:
      type: object
      properties:
        email:
          type: string
          description: Email to search by
          example: user@example.com
        phone:
          type: string
          description: Phone to search by
          example: '+1234567890'
        username:
          type: string
          description: Username to search by
          example: johndoe
    UpdateTenantAccountDto:
      type: object
      properties:
        name:
          type: string
          description: New name for the account
          example: Jane Smith Updated
          minLength: 3
          maxLength: 100
        avatarUrl:
          type: string
          description: New avatar URL
          example: https://example.com/new-avatar.png
    UpdateTenantAccountEmailDto:
      type: object
      properties:
        email:
          type: string
          description: New email address
          example: new.email@example.com
      required:
      - email
    UpdateTenantAccountPhoneDto:
      type: object
      properties:
        phone:
          type: string
          description: New phone number in E.164 format
          example: '+1987654321'
      required:
      - phone
    UpdateTenantAccountUsernameDto:
      type: object
      properties:
        username:
          type: string
          description: New username
          example: newusername
          minLength: 3
          maxLength: 20
      required:
      - username
    CreateEnvironmentDto:
      type: object
      properties:
        name:
          type: string
          description: Name of the environment
          example: staging
          minLength: 2
        customProperties:
          type: object
          description: Custom properties for the environment
          example:
            feature_flags:
              beta_features: true
          additionalProperties: true
      required:
      - name
    CreateEnvironmentResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the created environment
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - id
    EnvironmentResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the environment
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Name of the environment
          example: production
        tenantId:
          type: string
          description: UUID of the tenant this environment belongs to
          example: 550e8400-e29b-41d4-a716-446655440001
        customProperties:
          type: object
          description: Custom properties
          example:
            feature_flags:
              dark_mode: true
      required:
      - id
      - name
      - tenantId
    UpdateEnvironmentDto:
      type: object
      properties:
        name:
          type: string
          description: New name for the environment
          example: production-v2
          minLength: 2
    DeleteEnvironmentCustomPropertyDto:
      type: object
      properties:
        customProperty:
          type: string
          description: Key of the custom property to delete
          example: max_users
      required:
      - customProperty
    CreateEnvironmentAccountDto:
      type: object
      properties:
        name:
          type: string
          description: Full name of the account holder
          example: Alice Johnson
          minLength: 3
          maxLength: 100
        email:
          type: string
          description: Email address
          example: alice.johnson@example.com
        username:
          type: string
          description: Username
          example: alicejohnson
          minLength: 3
          maxLength: 20
        phone:
          type: string
          description: Phone number in E.164 format
          example: '+1234567890'
        avatarUrl:
          type: string
          description: URL to avatar image
          example: https://example.com/avatar.png
        customProperties:
          type: object
          description: Custom properties for the account
          example:
            preferences:
              theme: dark
          additionalProperties: true
      required:
      - name
      - email
      - username
      - phone
    CreateEnvironmentAccountResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the created account
          example: 550e8400-e29b-41d4-a716-446655440000
      required:
      - id
    EnvironmentAccountResponseDto:
      type: object
      properties:
        id:
          type: string
          description: UUID of the account
          example: 550e8400-e29b-41d4-a716-446655440000
        name:
          type: string
          description: Full name
          example: Alice Johnson
        email:
          type: string
          description: Email address
          example: alice.johnson@example.com
        username:
          type: string
          description: Username
          example: alicejohnson
        phone:
          type: string
          description: Phone number
          example: '+1234567890'
        avatarUrl:
          type: string
          description: Avatar URL
          example: https://example.com/avatar.png
        environmentId:
          type: string
          description: UUID of the environment
          example: 550e8400-e29b-41d4-a716-446655440001
        customProperties:
          type: object
          description: Custom properties
          example:
            preferences:
              theme: dark
      required:
      - id
      - name
      - email
      - username
      - phone
      - environmentId
    UpdateEnvironmentAccountDto:
      type: object
      properties:
        name:
          type: string
          description: New name for the account
          example: Alice Johnson Updated
          minLength: 3
          maxLength: 100
        avatarUrl:
          type: string
          description: New avatar URL
          example: https://example.com/new-avatar.png
    UpdateEnvironmentAccountEmailDto:
      type: object
      properties:
        email:
          type: string
          description: New email address
          example: new.alice@example.com
      required:
      - email
    UpdateEnvironmentAccountPhoneDto:
      type: object
      properties:
        phone:
          type: string
          description: New phone number in E.164 format
          example: '+1987654321'
      required:
      - phone
    UpdateEnvironmentAccountUsernameDto:
      type: object
      properties:
        username:
          type: string
          description: New username
          example: newalice
          minLength: 3
          maxLength: 20
      required:
      - username
    DeleteEnvironmentAccountCustomPropertyDto:
      type: object
      properties:
        customProperty:
          type: string
          description: Key of the custom property to delete
          example: subscription
      required:
      - customProperty
