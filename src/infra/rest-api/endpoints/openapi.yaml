openapi: 3.1.0
info:
  title: sump api
  description: sump - simple user management platform
  version: 0.1.0

tags:
  - name: Tenant
    description: Tenant related endpoints
  - name: Account
    description: Tenant Account related endpoints
  - name: Tenant Environment
    description: Tenant Environment related endpoints
  - name: Environment Account
    description: Environment Account related endpoints

components:
  schemas:
    CreateNewTenantOperationDto:
      type: object
      required:
        - tenant
        - account
      properties:
        tenant:
          type: object
          required:
            - name
            - customProperties
          properties:
            name:
              type: string
            customProperties:
              type: object
        account:
          type: object
          required:
            - name
            - username
            - email
          properties:
            name:
              type: string
            username:
              type: string
            email:
              type: string
            phone:
              type: string
            avatarUrl:
              type: string
        environment:
          type: object
          required:
            - name
            - customProperties
          properties:
            name:
              type: string
            customProperties:
              type: object

    CreateNewAccountOperationDto:
      type: object
      required:
        - name
        - username
        - email
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
        phone:
          type: string
        avatarUrl:
          type: string
        roles:
          type: array
          items:
            type: string

    CreateNewEnvironmentOperationDto:
      type: object
      required:
        - name
        - customProperties
      properties:
        name:
          type: string
        customProperties:
          type: object

    CreateNewEnvironmentAccountOperationDto:
      type: object
      required:
        - name
        - customProperties
      properties:
        name:
          type: string
        username:
          type: string
        email:
          type: string
        phone:
          type: string
        avatarUrl:
          type: string
        customProperties:
          type: object

    UpdateTenantOperationDto:
      type: object
      properties:
        name:
          type: string

    UpdateAccountOperationDto:
      type: object
      properties:
        name:
          type: string

    UpdateAccountEmailOperationDto:
      type: object
      properties:
        email:
          type: string

    UpdateAccountPhoneOperationDto:
      type: object
      properties:
        phone:
          type: string

    UpdateEnvironmentAccountOperationDto:
      type: object
      properties:
        name:
          type: string

    UpdateEnvironmentAccountEmailOperationDto:
      type: object
      properties:
        email:
          type: string

    UpdateEnvironmentAccountPhoneOperationDto:
      type: object
      properties:
        phone:
          type: string

    SetTenantCustomPropertyOperationDto:
      type: object

    DeleteTenantCustomPropertyOperationDto:
      type: object

    SetEnvironmentCustomPropertyOperationDto:
      type: object

    DeleteEnvironmentCustomPropertyOperationDto:
      type: object

    SetEnvironmentAccountCustomPropertyOperationDto:
      type: object

    DeleteEnvironmentAccountCustomPropertyOperationDto:
      type: object

    UpdateAccountUsernameOperationDto:
      type: object
      properties:
        username:
          type: string

    UpdateEnvironmentByIdAndTenantIdOperationDto:
      type: object
      properties:
        name:
          type: string

    UpdateEnvironmentAccountByIdAndEnvironmentIdOperationDto:
      type: object
      properties:
        name:
          type: string

    GetAccountByUserDefinedIdentificationAndTenantIdOperation:
      type: object
      properties:
        username:
          type: string
        email:
          type: string
        phone:
          type: string

    CreateNewTenantOperationDtoResponse:
      type: object
      properties:
        tenantId:
          type: string
        accountId:
          type: string
        tenantEnvironmentId:
          type: string

    CreateNewAccountOperationDtoResponse:
      type: object
      properties:
        accountId:
          type: string

    CreateNewEnvironmentOperationDtoResponse:
      type: object
      properties:
        environmentId:
          type: string

    CreateNewEnvironmentAccountOperationDtoResponse:
      type: object
      properties:
        accountId:
          type: string

    GetTenantByIdOperationDtoResponse:
      type: object
      properties:
        name:
          type: string
        customProperties:
          type: object
        environments:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              tenantId:
                type: string
              name:
                type: string
              customProperties:
                type: object

    GetAccountsByTenantIdOperationDtoResponse:
      type: array
      items:
        type: object
        properties:
          id:
            type: string
          tenantId:
            type: string
          name:
            type: string
          email:
            type: string
          phone:
            type: string
          username:
            type: string
          avatarUrl:
            type: string
          roles:
            type: array
            items:
              type: string

    GetAccountByIdAndTenantIdOperationDtoResponse:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        name:
          type: string
        email:
          type: string
        phone:
          type: string
        username:
          type: string
        avatarUrl:
          type: string
        roles:
          type: array
          items:
            type: string

    GetEnvironmentByIdAndTenantIdOperationDtoResponse:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        tenantId:
          type: string
        customProperties:
          type: object

    GetEnvironmentAccountByIdAndEnvironmentIdOperationDtoResponse:
      type: object
      properties:
        id:
          type: string
        tenantId:
          type: string
        name:
          type: string
        email:
          type: string
        phone:
          type: string
        username:
          type: string
        avatarUrl:
          type: string
        customProperties:
          type: object

paths:
  /api/v1/tenants:
    post:
      operationId: createnewtenant
      tags:
        - Tenant
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewTenantOperationDto'
      responses:
        '201':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateNewTenantOperationDtoResponse'

  /api/v1/tenants/{tenantId}:
    get:
      operationId: gettenantbyid
      tags:
        - Tenant
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant to return
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTenantByIdOperationDtoResponse'
    patch:
      operationId: updatetenantbyid
      tags:
        - Tenant
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant to update
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTenantOperationDto'
      responses:
        '200':
          description: 'Expected response sdafasfd'
    delete:
      operationId: deletetenantbyid
      tags:
        - Tenant
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant to delete
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/custom-property:
    patch:
      operationId: updatetenantcustompropertiesbytenantid
      tags:
        - Tenant
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetTenantCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'

    delete:
      operationId: deletetenantcustompropertiesbytenantid
      tags:
        - Tenant
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteTenantCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/accounts:
    get:
      operationId: getaccountsbytenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAccountsByTenantIdOperationDtoResponse'
    post:
      operationId: createnewaccount
      tags:
        - Account
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewAccountOperationDto'
      responses:
        '201':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateNewAccountOperationDtoResponse'

  /api/v1/tenants/{tenantId}/accounts/{accountId}:
    get:
      operationId: getaccountbyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetAccountByIdAndTenantIdOperationDtoResponse'
    delete:
      operationId: deleteaccountbyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '204':
          description: 'Expected response'
    patch:
      operationId: updateaccountbyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccountOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/accounts/{accountId}/email:
    patch:
      operationId: updateaccountemailbyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccountEmailOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/accounts/{accountId}/username:
    patch:
      operationId: updateaccountusernamebyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccounUsernameOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/accounts/{accountId}/phone:
    patch:
      operationId: updateaccountphonebyidandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccountPhoneOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/accounts/user-defined-identification:
    get:
      operationId: getaccountbyuserdefinedidentificationandtenantid
      tags:
        - Account
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GetAccountByUserDefinedIdentificationAndTenantIdOperation'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenants/{tenantId}/environments:
    post:
      operationId: createnewenvironment
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewEnvironmentOperationDto'
      responses:
        '201':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateNewEnvironmentOperationDtoResponse'

  /api/v1/tenants/{tenantId}/environments/{environmentId}:
    patch:
      operationId: updateenvironmentbyidandtenantid
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentByIdAndTenantIdOperationDto'
      responses:
        '200':
          description: 'Expected response'
    delete:
      operationId: deleteenvironmentbyidandtenantid
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
    get:
      operationId: getenvironmentbyidandtenantid
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetEnvironmentByIdAndTenantIdOperationDtoResponse'

  /api/v1/tenants/{tenantId}/environments/{environmentId}/custom-property:
    patch:
      operationId: updateenvironmentcustompropertiesbyidandtenantid
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetEnvironmentCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'

    delete:
      operationId: deleteenvironmentcustompropertiesbyidandtenantid
      tags:
        - Tenant Environment
      parameters:
        - name: tenantId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteEnvironmentCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenant-environments/{environmentId}/accounts:
    post:
      operationId: createnewenvironmentaccount
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewEnvironmentAccountOperationDto'
      responses:
        '201':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateNewEnvironmentAccountOperationDtoResponse'

  /api/v1/tenant-environments/{environmentId}/accounts/{accountId}:
    patch:
      operationId: updateenvironmentaccountbyidandenvironmentid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountByIdAndEnvironmentIdOperationDto'
      responses:
        '200':
          description: 'Expected response'
    delete:
      operationId: deleteenvironmentaccountbyidandenvironmentid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
    get:
      operationId: getnvironmentaccountbyidandenvironmentid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Expected response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetEnvironmentAccountByIdAndEnvironmentIdOperationDtoResponse'

  /api/v1/tenant-environments/{environmentId}/accounts/{accountId}/email:
    patch:
      operationId: updateenvironmentaccountemailbyidandtenantid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountEmailOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenant-environments/{environmentId}/accounts/{accountId}/username:
    patch:
      operationId: updateenvironmentaccountusernamebyidandtenantid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccounUsernameOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenant-environments/{environmentId}/accounts/{accountId}/phone:
    patch:
      operationId: updateenvironmentaccountphonebyidandtenantid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEnvironmentAccountPhoneOperationDto'
      responses:
        '200':
          description: 'Expected response'

  /api/v1/tenant-environments/{environmentId}/accounts/{accountId}/custom-property:
    patch:
      operationId: updateenvironmentaccountcustompropertiesbyidandtenantid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetEnvironmentAccountCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'

    delete:
      operationId: deleteenvironmentaccountcustompropertiesbyidandtenantid
      tags:
        - Environment Account
      parameters:
        - name: environmentId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
        - name: accountId
          in: path
          description: ID of tenant the accounts will be listed from
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DeleteEnvironmentAccountCustomPropertyOperationDto'
      responses:
        '200':
          description: 'Expected response'
